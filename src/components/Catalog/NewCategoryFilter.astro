---
interface Category {
  id: string;
  name: string;
}

interface Props {
  activeCategory: string;
  categories: Category[];
}

const { activeCategory, categories } = Astro.props;

// Asegurarse de que 'all' esté presente en las categorías
const allCategories = [
  { id: 'all', name: 'Todos los productos' },
  ...categories
];
---

<div class="category-filters">
  {allCategories.map((category) => (
    <a
      href={`/catalog?category=${category.id}`}
      class={`filter-link ${activeCategory === category.id ? 'active' : ''}`}
      aria-current={activeCategory === category.id ? 'page' : undefined}
    >
      {category.name}
    </a>
  ))}
</div>

<style>
  .category-filters {
    display: flex;
    flex-wrap: nowrap;
    gap: 0.5rem;
    margin: 0 0 2.5rem;
    padding: 0.25rem;
    background-color: var(--color-gray-50);
    border-radius: var(--border-radius-lg);
    border: 1px solid var(--color-gray-200);
    width: fit-content;
    max-width: 100%;
    overflow-x: auto;
    scrollbar-width: thin;
    -webkit-overflow-scrolling: touch;
  }

  .filter-link {
    text-decoration: none;
    color: var(--color-gray-600);
    padding: 0.5rem 1.25rem;
    border-radius: var(--border-radius-md);
    background-color: transparent;
    transition: var(--transition-colors);
    font-size: 0.8125rem;
    font-weight: 500;
    white-space: nowrap;
    line-height: 1.25;
    border: none;
  }

  .filter-link:hover {
    background-color: var(--color-white);
    color: var(--color-primary-700);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  }

  .filter-link.active {
    background-color: var(--color-white);
    color: var(--color-primary-700);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
    font-weight: 600;
  }

  /* Estilos para la barra de desplazamiento */
  .category-filters::-webkit-scrollbar {
    height: 6px;
  }

  .category-filters::-webkit-scrollbar-track {
    background: var(--color-gray-100);
    border-radius: 3px;
  }

  .category-filters::-webkit-scrollbar-thumb {
    background-color: var(--color-gray-300);
    border-radius: 3px;
  }

  .category-filters::-webkit-scrollbar-thumb:hover {
    background-color: var(--color-gray-400);
  }

  @media (max-width: 768px) {
    .category-filters {
      margin-left: -1.25rem;
      margin-right: -1.25rem;
      border-radius: 0;
      border-left: none;
      border-right: none;
      padding: 0.25rem 1.25rem;
    }
    
    .filter-link {
      font-size: 0.8125rem;
      padding: 0.5rem 1rem;
    }
  }
</style>
